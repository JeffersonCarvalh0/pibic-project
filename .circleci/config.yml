version: 2
jobs:
  build:
    docker:
      - image: circleci/node:stretch
      - image: circleci/mongo:3.4.4
    steps:
      - checkout
      - restore_cache:
        name: Restore yarn package cache
        key: yarn-packages-{{ checksum "yarn.lock" }}
      -run:
        name: Install dependencies
        command: yarn install --frozen-lockfile
      -save_cache:
        name: Save yarn package cache
        key: yarn-packages-{{ checksum "yarn.lock" }}
        paths:
          - ~/.cache/yarn
      -run:
        name: test
        command: yarn test


